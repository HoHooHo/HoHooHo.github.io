## C++文件编译四个阶段

!!! info ""
	1. 预处理：
		- 根据文件中的预处理指令来处理代码文件
		- 预编译过程主要处理那些源代码中以#开始的预编译指令，主要处理规则如下：
			- 将所有的#define删除，并且展开所有的宏定义
			- 处理所有条件编译指令，如#if，#ifdef等
			- 处理#include预编译指令，将被包含的文件插入到该预编译指令的位置。该过程递归进行，及被包含的文件可能还包含其他文件
			- 删除所有的注释//和 /**/
			- 添加行号和文件标识，如#2 “hello.c” 2,以便于编译时编译器产生调试用的行号信息及用于编译时产生编译错误或警告时能够显示行号信息
			- 保留所有的#pragma编译器指令，因为编译器须要使用它们；
	2. 编译
		- 把预处理完的文件进行一系列词法分析，语法分析，语义分析及优化后生成相应的汇编代码文件
	3. 汇编
		- 汇编器把汇编代码转变成目标机器指令
	4. 链接
		- 链接器将各个目标文件组装在一起，解决符号依赖、库依赖关系，并生成可执行文件。


## C++内存区域的5个区域

!!! info ""
	1. 栈
		- 编译器自动分配释放，主要存放函数的参数值，局部变量值等
	2. 堆
		- 由程序员分配释放
	3. 全局/静态区
		- 存放全局变量和静态变量；程序结束时由系统释放
	4. 常量区
		- 这是一块比较特殊的存储区，里面存放的是常量，不允许修改
	5. 程序代码区
		- 存放函数体的二进制代码



## extern“C”的作用

!!! info ""
	extern “C” 告诉 C++ 编译器用 C规则 编译指定的代码
	
	C++需要支持重载，单纯的函数名无法区分出具体的函数，所以在编译阶段就需要将形参列表作为附加项增加到函数符号中